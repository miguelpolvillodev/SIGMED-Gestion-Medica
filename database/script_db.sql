CREATE TABLE USUARIOS (
    ID_USUARIO    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USERNAME      VARCHAR2(50) UNIQUE NOT NULL,
    PASSWORD      VARCHAR2(50) NOT NULL,
    ROL           VARCHAR2(20) CHECK (ROL IN ('ADMIN', 'MEDICO'))
);

CREATE TABLE PACIENTES (
    ID_PACIENTE   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DNI           VARCHAR2(9) UNIQUE NOT NULL,
    NOMBRE        VARCHAR2(50) NOT NULL,
    APELLIDOS     VARCHAR2(100) NOT NULL,
    TELEFONO      VARCHAR2(15)
);

CREATE TABLE CITAS (
    ID_CITA       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_USUARIO    NUMBER NOT NULL,
    ID_PACIENTE   NUMBER NOT NULL,
    FECHA_HORA    TIMESTAMP NOT NULL,
    MOTIVO        VARCHAR2(255),
    
    CONSTRAINT FK_CITA_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO),
    CONSTRAINT FK_CITA_PACIENTE FOREIGN KEY (ID_PACIENTE) REFERENCES PACIENTES(ID_PACIENTE)
);

-- Usuario de prueba
INSERT INTO USUARIOS (USERNAME, PASSWORD, ROL) VALUES ('admin', 'admin123', 'ADMIN');
INSERT INTO USUARIOS (USERNAME, PASSWORD, ROL) VALUES ('dr_house', '1234', 'MEDICO');

COMMIT;